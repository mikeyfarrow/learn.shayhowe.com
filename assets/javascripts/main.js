function bitly(t,a){var e="o_49r472vsrd",n="R_a023252cc7046b36d8b33ca9f406de18";$.getJSON("https://api-ssl.bitly.com/v3/shorten?callback=?",{format:"json",apiKey:n,login:e,longUrl:t},function(t){a(t.data.url)})}$(document).ready(function(){function t(t,a){function e(){n.find('button[type="submit"]').attr("disabled",!1)}var n=$('[data-js="'+t+'"]'),o=$('[data-js="'+a+'"]');setTimeout(e,2e3),n.submit(function(){if(n.find('[data-js="checkbox-robot"]').is(":checked")||-1==$.inArray(n.find('[data-js="location"]').val().slice(-2),i)||n.find('[data-js="key"]').val()!=recommendation_key)return!1;if(n.find('[data-js="name"]').val().length>0){var t=n.find('[data-js="name"]').val();$('[data-js="name"]').each(function(){$(this).val(t)})}if(n.find('[data-js="email"]').val().length>0){var a=n.find('[data-js="email"]').val();$('[data-js="email"]').each(function(){$(this).val(a)})}if(n.find('[data-js="tel"]').val().length>0){var e=n.find('[data-js="tel"]').val();$('[data-js="tel"]').each(function(){$(this).val(e)})}if(n.find('[data-js="key"]').val()==recommendation_key){var r=n.find('[data-js="key"]').val();o.find('[data-js="key"]').val(r)}n.toggle(),o.toggle()})}var a=$("[data-toggle-control]"),e=a.val(),n=a.attr("data-toggle-control"),o=$("[data-toggle-"+n+'*="'+e+'"]');e===o.attr("data-toggle-"+n)?o.css("display","block").removeAttr("hidden"):o.hide().attr("hidden",!0),a.on("change",function(t){$("[data-toggle-"+$(this).attr("data-toggle-control")+"]").hide().attr("hidden",!0),$("[data-toggle-"+$(this).attr("data-toggle-control")+'*="'+$(this).val()+'"]').css("display","block").removeAttr("hidden")});var i=["US","GB","AU","NZ","HK","SG","CA"];$.get("http://freegeoip.net/json/",function(t){-1!=$.inArray(t.country_code,i)&&($('[data-js="geo-unavailable"]').hide(),$('[data-js="geo-location"]').show()),t.city.length&&$('[data-js="geo-city"]').is(":visible")&&$('[data-js="geo-city"]').html(", "+t.city+","),$('[data-js="location"]').each(function(){$(this).val(t.city+", "+t.region_code+", "+t.country_code)})},"jsonp"),recommendation_key="robotsnotwelcome",window.location.href.indexOf("/recommendations/#details")>-1&&($('[data-js="recommendation-form"]').hide(),$('[data-js="recommendation-follow-up-form"]').show()),$.urlParam=function(t){var a=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null==a?null:a[1]||0},window.location.hash.indexOf("#details")>-1&&(null!=$.urlParam("n")?$('[data-js="name"]').each(function(){$(this).val($.urlParam("n"))}):$('[data-js="name"]').each(function(){$(this).parent(".hide").removeClass("hide")}),null!=$.urlParam("e")?$('[data-js="email"]').each(function(){$(this).val($.urlParam("e"))}):$('[data-js="email"]').each(function(){$(this).parent(".hide").removeClass("hide")}),null!=$.urlParam("t")?$('[data-js="tel"]').each(function(){$(this).val($.urlParam("t"))}):$('[data-js="tel"]').each(function(){$(this).parent(".hide").removeClass("hide")}),null!=$.urlParam("key")?$('[data-js="key"]').each(function(){$(this).val($.urlParam("key"))}):$('[data-js="key"]').each(function(){$(this).parent(".hide").removeClass("hide")})),t("recommendation-form","recommendation-follow-up-form"),t("recommendation-follow-up-form","recommendation-form-success")}),function(t,a){"use strict";var e=function(){function a(t){if(t){var a,e,i=t.offsetHeight;for(var r in o)a=r,document.body.clientWidth>a&&a>=e&&(n=o[r],e=a);t.style.marginBottom=n-i%n+"px"}}function e(e){a(e),"addEventListener"in t?t.addEventListener("resize",function(){a(e)},!1):"attachEvent"in t&&t.attachEvent("resize",function(){a(e)})}var n=0,o={};return function(t,a){var i="string"==typeof t?document.querySelectorAll(t):t,r=i.length;if("number"==typeof a)n=parseInt(a,10);else if("object"==typeof a){var s=parseInt(getComputedStyle(document.body,null).getPropertyValue("font-size"),10);for(var l in o){var d=/\d+em/.test(l)?parseInt(l,10)*s:/\d+px/.test(l)?parseInt(l,10):l;o[d]=parseInt(o[l],10)}}if(r>1)for(;r--;)e(i[r]);else e(i[0])}}();"undefined"!=typeof a?a.extend(a.fn,{baseline:function(t){return e(this,t)}}):t.baseline=e}(window,window.jQuery||window.Zepto||void 0),$(document).ready(function(){$("img").not('[data-js="promo-book-img"] img').baseline(6),$('[data-js="primary-nav-btn"]').on("click",function(t){t.preventDefault(),$("body").toggleClass("nav-open"),$('[data-js="primary-nav-close"]').on("click",function(t){t.preventDefault(),$("body").removeClass("nav-open"),$('[data-js="primary-nav-close"]').off("click")})});var t=$('[data-js="share"]').attr("data-permalink"),a=encodeURIComponent($('[data-js="share"]').attr("data-title"));bitly(t,function(e){$('[data-js="share-twitter"]').attr("href","https://twitter.com/share?text="+a+"%20-&url="+t+"&via=shayhowe&related=shayhowe"),$('[data-js="share-facebook"]').attr("href","http://www.facebook.com/sharer.php?u="+t),$('[data-js="share-google"]').attr("href","https://plus.google.com/share?url="+t)}),$('[data-js="share-twitter"]').click(function(){return window.open($(this).attr("href"),"sharer","toolbar=0,status=0,width=626,height=436"),!1}),$('[data-js="share-facebook"]').click(function(){return window.open($(this).attr("href"),"sharer","toolbar=0,status=0,width=626,height=436"),!1}),$('[data-js="share-google"]').click(function(){return window.open($(this).attr("href"),"sharer","toolbar=0,status=0,width=626,height=436"),!1}),$('[data-js="lesson"] h2').each(function(){var t=$(this).attr("id");$(this).append('<a class="lesson-anchor" data-js="lesson-anchor" href="#'+t+'">#'+t+"</a>"),$(this).hover(function(){$(this).children('[data-js="lesson-anchor"]').stop().css("display","inline-block").animate({opacity:"1"},150)},function(){$(this).children('[data-js="lesson-anchor"]').stop().animate({opacity:"0"},150,function(){$(this).css("display","none")})})})});